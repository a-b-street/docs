<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Importing a new city - A/B Street</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Homepage</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../software/index.html"><strong aria-hidden="true">2.</strong> Software</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../software/abstreet.html"><strong aria-hidden="true">2.1.</strong> A/B Street</a></li><li class="chapter-item expanded "><a href="../software/ungap_the_map/index.html"><strong aria-hidden="true">2.2.</strong> Ungap the Map</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../software/ungap_the_map/user_guide.html"><strong aria-hidden="true">2.2.1.</strong> User guide</a></li><li class="chapter-item expanded "><a href="../software/ungap_the_map/motivation.html"><strong aria-hidden="true">2.2.2.</strong> Motivation</a></li><li class="chapter-item expanded "><a href="../software/ungap_the_map/plan.html"><strong aria-hidden="true">2.2.3.</strong> Project plan</a></li><li class="chapter-item expanded "><a href="../software/ungap_the_map/tech_details.html"><strong aria-hidden="true">2.2.4.</strong> Technical details</a></li></ol></li><li class="chapter-item expanded "><a href="../software/fifteen_min.html"><strong aria-hidden="true">2.3.</strong> 15-minute neighborhoods explorer</a></li><li class="chapter-item expanded "><a href="../software/santa.html"><strong aria-hidden="true">2.4.</strong> 15-minute Santa</a></li><li class="chapter-item expanded "><a href="../software/ltn/index.html"><strong aria-hidden="true">2.5.</strong> Low-traffic neighborhoods</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../software/ltn/tech_details.html"><strong aria-hidden="true">2.5.1.</strong> Technical details</a></li></ol></li><li class="chapter-item expanded "><a href="../software/osm_viewer.html"><strong aria-hidden="true">2.6.</strong> OpenStreetMap viewer</a></li><li class="chapter-item expanded "><a href="../software/parking_mapper.html"><strong aria-hidden="true">2.7.</strong> Mapping on-street parking</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../user/index.html"><strong aria-hidden="true">3.</strong> User guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../user/new_city.html" class="active"><strong aria-hidden="true">3.1.</strong> Importing a new city</a></li><li class="chapter-item expanded "><a href="../user/asu.html"><strong aria-hidden="true">3.2.</strong> ASU Lab guide</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../proposals/index.html"><strong aria-hidden="true">4.</strong> Proposals</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../proposals/seattle_bikes/index.html"><strong aria-hidden="true">4.1.</strong> Seattle bike network vision</a></li><li class="chapter-item expanded "><a href="../proposals/broadmoor.html"><strong aria-hidden="true">4.2.</strong> Allow bike and foot traffic through Broadmoor</a></li><li class="chapter-item expanded "><a href="../proposals/lake_wash.html"><strong aria-hidden="true">4.3.</strong> Lake Washington Blvd Stay Healthy Street</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../tech/index.html"><strong aria-hidden="true">5.</strong> Technical details</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/dev/index.html"><strong aria-hidden="true">5.1.</strong> Developer guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/dev/misc_tricks.html"><strong aria-hidden="true">5.1.1.</strong> Misc developer tricks</a></li><li class="chapter-item expanded "><a href="../tech/dev/api.html"><strong aria-hidden="true">5.1.2.</strong> API</a></li><li class="chapter-item expanded "><a href="../tech/dev/testing.html"><strong aria-hidden="true">5.1.3.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../tech/dev/data.html"><strong aria-hidden="true">5.1.4.</strong> Data organization</a></li><li class="chapter-item expanded "><a href="../tech/dev/release.html"><strong aria-hidden="true">5.1.5.</strong> Release process</a></li><li class="chapter-item expanded "><a href="../tech/dev/formats/index.html"><strong aria-hidden="true">5.1.6.</strong> Data formats</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/dev/formats/scenarios.html"><strong aria-hidden="true">5.1.6.1.</strong> Scenarios</a></li><li class="chapter-item expanded "><a href="../tech/dev/formats/traffic_signals.html"><strong aria-hidden="true">5.1.6.2.</strong> Traffic signals</a></li></ol></li><li class="chapter-item expanded "><a href="../tech/dev/ui.html"><strong aria-hidden="true">5.1.7.</strong> widgetry UI</a></li></ol></li><li class="chapter-item expanded "><a href="../tech/map/index.html"><strong aria-hidden="true">5.2.</strong> Map model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/map/geometry/index.html"><strong aria-hidden="true">5.2.1.</strong> Intersection geometry</a></li><li class="chapter-item expanded "><a href="../tech/map/details.html"><strong aria-hidden="true">5.2.2.</strong> Details</a></li><li class="chapter-item expanded "><a href="../tech/map/importing/index.html"><strong aria-hidden="true">5.2.3.</strong> Importing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/map/importing/convert_osm.html"><strong aria-hidden="true">5.2.3.1.</strong> convert_osm</a></li><li class="chapter-item expanded "><a href="../tech/map/importing/geometry.html"><strong aria-hidden="true">5.2.3.2.</strong> Road/intersection geometry</a></li><li class="chapter-item expanded "><a href="../tech/map/importing/rest.html"><strong aria-hidden="true">5.2.3.3.</strong> The rest</a></li><li class="chapter-item expanded "><a href="../tech/map/importing/misc.html"><strong aria-hidden="true">5.2.3.4.</strong> Misc</a></li></ol></li><li class="chapter-item expanded "><a href="../tech/map/edits.html"><strong aria-hidden="true">5.2.4.</strong> Live edits</a></li><li class="chapter-item expanded "><a href="../tech/map/platform.html"><strong aria-hidden="true">5.2.5.</strong> Exporting</a></li></ol></li><li class="chapter-item expanded "><a href="../tech/trafficsim/index.html"><strong aria-hidden="true">5.3.</strong> Traffic simulation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/trafficsim/discrete_event/index.html"><strong aria-hidden="true">5.3.1.</strong> Discrete event simulation</a></li><li class="chapter-item expanded "><a href="../tech/trafficsim/travel_demand.html"><strong aria-hidden="true">5.3.2.</strong> Travel demand</a></li><li class="chapter-item expanded "><a href="../tech/trafficsim/gridlock.html"><strong aria-hidden="true">5.3.3.</strong> Gridlock</a></li><li class="chapter-item expanded "><a href="../tech/trafficsim/trips.html"><strong aria-hidden="true">5.3.4.</strong> Multi-modal trips</a></li><li class="chapter-item expanded "><a href="../tech/trafficsim/live_edits.html"><strong aria-hidden="true">5.3.5.</strong> Live edits</a></li><li class="chapter-item expanded "><a href="../tech/trafficsim/parking.html"><strong aria-hidden="true">5.3.6.</strong> Parking</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../project/index.html"><strong aria-hidden="true">6.</strong> Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../project/team.html"><strong aria-hidden="true">6.1.</strong> Team</a></li><li class="chapter-item expanded "><a href="../project/contributing.html"><strong aria-hidden="true">6.2.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="../project/funding.html"><strong aria-hidden="true">6.3.</strong> Funding</a></li><li class="chapter-item expanded "><a href="../project/motivations.html"><strong aria-hidden="true">6.4.</strong> Motivations</a></li><li class="chapter-item expanded "><a href="../project/history/index.html"><strong aria-hidden="true">6.5.</strong> History</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../project/history/backstory.html"><strong aria-hidden="true">6.5.1.</strong> Backstory</a></li><li class="chapter-item expanded "><a href="../project/history/year1.html"><strong aria-hidden="true">6.5.2.</strong> Year 1</a></li><li class="chapter-item expanded "><a href="../project/history/year2.html"><strong aria-hidden="true">6.5.3.</strong> Year 2</a></li><li class="chapter-item expanded "><a href="../project/history/year3.html"><strong aria-hidden="true">6.5.4.</strong> Year 3</a></li><li class="chapter-item expanded "><a href="../project/history/retrospective/index.html"><strong aria-hidden="true">6.5.5.</strong> 3 year retrospective</a></li><li class="chapter-item expanded "><a href="../project/history/vision_and_validate/index.html"><strong aria-hidden="true">6.5.6.</strong> 2022 retrospective</a></li><li class="chapter-item expanded "><a href="../project/history/CHANGELOG.html"><strong aria-hidden="true">6.5.7.</strong> Full CHANGELOG</a></li></ol></li><li class="chapter-item expanded "><a href="../project/users.html"><strong aria-hidden="true">6.6.</strong> Users</a></li><li class="chapter-item expanded "><a href="../project/references.html"><strong aria-hidden="true">6.7.</strong> References</a></li><li class="chapter-item expanded "><a href="../project/presentations.html"><strong aria-hidden="true">6.8.</strong> Presentations</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">A/B Street</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/a-b-street/docs/tree/main/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/a-b-street/docs/edit/main/book/src/user/new_city.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="importing-a-new-city-into-ab-street"><a class="header" href="#importing-a-new-city-into-ab-street">Importing a new city into A/B Street</a></h1>
<p>If you get stuck, please email <a href="mailto:dabreegster@gmail.com">dabreegster@gmail.com</a> or
<a href="https://github.com/a-b-street/abstreet/issues/">file a Github issue</a>. I promise
quick turnaround time. All you need to do is send the boundary of the area you
want, drawn with <a href="http://geojson.io">geojson.io</a>.</p>
<h2 id="the-easy-method"><a class="header" href="#the-easy-method">The easy method</a></h2>
<p>This only works in the <a href="index.html">downloaded version</a>, not on web.</p>
<ol>
<li>Click the map name in sandbox mode to change your location.</li>
<li>Click &quot;import a new city&quot;</li>
<li>Follow the instructions. That's it!</li>
</ol>
<p>This may take a few minutes, depending on download speed. Be sure to use the
polygon tool to draw an area, not the polyline tool.</p>
<h2 id="if-the-city-has-already-been-imported"><a class="header" href="#if-the-city-has-already-been-imported">If the city has already been imported</a></h2>
<p>A/B Street includes many cities already. Once you're running the game (natively
or on the web), click on the Sandbox option, then check the top for a button to
change the map:</p>
<p><img src="change_map.png" alt="" /></p>
<p>You can browse through a list of cities per country, or use a text search:</p>
<p><img src="search_maps.png" alt="" /></p>
<p>You may need to download data for that city:</p>
<p><img src="download_map.png" alt="" /></p>
<p>You should be able to open the map. In this case above, the map data was saved
as <code>data/system/gb/exeter_red_cow_village/maps/center.bin</code>.</p>
<h2 id="how-to-pick-boundaries"><a class="header" href="#how-to-pick-boundaries">How to pick boundaries</a></h2>
<p>How do you decide what part of a city to import? It can be tempting to use
pre-existing administrative boundaries. There are a few problems:</p>
<ol>
<li>Official boundaries might exclude something relevant to transportation in
the area. For example, London boroughs don't cover the River Thames or its
bridges! Or if you're studying low-traffic neighborhoods, an area near the
border of two boroughs might not include enough surrounding context.</li>
</ol>
<p><img src="london_boroughs.png" alt="" /></p>
<ol start="2">
<li>
<p>File size is hard to tune. You have to play around with this to make the
resulting area large enough to be useful, but the map file small enough to
comfortably load. About 50MB uncompressed (usually 20MB gzipped) is a good
target.</p>
</li>
<li>
<p>You might have to adjust the boundary to exclude the coastline and ocean,
due to <a href="https://github.com/dabreegster/abstreet/issues/32">a bug</a>.</p>
</li>
</ol>
<p>You can create multiple districts covering a city. The districts can partially
overlap, and you don't have to cover everything. It's totally dependent on what
you want to study. The current Seattle boundaries are just based on different
projects we've worked on:</p>
<p><img src="seattle_boundaries.png" alt="" /></p>
<p>You can also just make best geographic guesses like in Paris:</p>
<p><img src="paris_boundaries.png" alt="" /></p>
<p>The more maps configured to always be imported, the slower my development
workflow gets when working on map importer code. So I'd also request you don't
go overboard and ask for lots of areas, unless you're going to actively work on
some advocacy or research across multiple A/B Street releases. You can always
import an area yourself in the UI.</p>
<h2 id="advanced-using-the-command-line"><a class="header" href="#advanced-using-the-command-line">Advanced: Using the command-line</a></h2>
<p>The process above using the UI just calls a tool to do all of the work. If you
want, you can just call that tool from the command line. First save a GeoJSON
file with your boundary. Then...</p>
<p>Using a .zip release:
<code>./cli one-step-import --geojson-path=boundary.geojson --map-name=prague</code></p>
<p>Building from source:
<code>cargo run --release --bin cli -- one-step-import --geojson-path=boundary.geojson --map-name=prague</code></p>
<p>The new map is located in the country with code &quot;zz&quot; (this isn't a real
country), in the &quot;oneshot&quot; city. This is stored in
<code>data/system/zz/oneshot/maps</code>.</p>
<h2 id="advanced-adding-the-city-to-ab-street-permanently"><a class="header" href="#advanced-adding-the-city-to-ab-street-permanently">Advanced: Adding the city to A/B street permanently</a></h2>
<p>The easiest method is to just ask Dustin to do this. The full process:</p>
<ol>
<li>
<p>Make sure you can run <code>import.sh</code> -- see
<a href="../tech/dev/index.html#building-map-data">the instructions</a>. You'll need
Rust, osmium, gdal, etc.</p>
</li>
<li>
<p>Create a new directory: <code>mkdir importer/config/xy/your_city</code>, where <code>xy</code> is
a lowercase two letter country code from
<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2</a></p>
</li>
<li>
<p>Use <a href="http://geojson.io/">geojson.io</a> or
<a href="https://geoman.io/geojson-editor">geoman.io</a> to draw a boundary around the
region you want to simulate and save the geojson locally as
<code>importer/config/xy/your_city/region_name.geojson</code>.</p>
</li>
<li>
<p>Edit <code>importer/src/map_config.rs</code> if needed.</p>
</li>
<li>
<p>Run the import: <code>./import.sh --city=xy/your_city --raw --map</code></p>
</li>
<li>
<p>Update <code>.gitignore</code>, following <code>tel_aviv</code> as an example. Keep sorted!</p>
</li>
<li>
<p>Fill out <code>nice_map_name</code> in <code>map_gui/src/tools/mod.rs</code>.</p>
</li>
</ol>
<p>Send a PR with your changes! I'll generate everything and make it work with
<code>updater</code>, so most people don't have to build everything from scratch.</p>
<p>Also, you can divide the city into multiple regions, repeating step 4 and
declaring more polygon boundaries. The boundaries may overlap each other, and
they don't have to cover all of the space. Picking good boundaries may take
trial-and-error; the goal is to keep the resulting map file size small, so that
it loads quickly, while capturing all of the area needed to simulate something
interesting. This is easiest when you have some local knowledge of the area, and
at least a vague goal in mind for what you want to study.</p>
<h2 id="advanced-importing-a-osm-file-directly"><a class="header" href="#advanced-importing-a-osm-file-directly">Advanced: Importing a .osm file directly</a></h2>
<p>This section assumes you're comfortable working on a command line. If you have a
.osm XML file, you can import it directly by running
<code>cargo run --release --bin cli -- oneshot-import /path/to/extract.osm</code>. If
you're running from a .zip release and not building from source, replace the
first part with <code>./cli oneshot-import</code>.</p>
<p>Assuming this succeeds, it'll create a file in the
<code>data/system/zz/oneshot/maps/</code> directory. In the UI, you can open the &quot;zz&quot;
country to find it.</p>
<p>If you save a .osm file from JOSM, you might get an error importing related to
<code>convert_osm/src/clip.rs</code>. If so, delete the <code>&lt;bounds&gt;</code> element from the top of
the .osm file and try again.</p>
<p>If you follow this process, the resulting map won't have any border
intersections, which will break parts of the simulation:</p>
<p><img src="no_clip.png" alt="no_clip" /></p>
<p>You can fix this by creating the Osmosis .poly file and passing
<code>--clip-path=/path/to/clip.poly</code> to the import command.</p>
<p>One use case for following this section is to temporarily work around
<a href="https://github.com/a-b-street/abstreet/issues/654">broken intersection geometry</a>.
The process is:</p>
<ol>
<li>Edit the problematic area in JOSM, recreating a complicated intersection in
a simpler way.</li>
<li>Save the .osm file locally</li>
<li>Run the importer</li>
<li>Try in A/B Street</li>
</ol>
<p>You probably don't want to upload the changeset to OSM, unless it's actually
mis-tagged. Usually the problem is how A/B Street tries to interpret what's in
OSM. Ideally we could also follow this process using the ID editor, but it can't
currently
<a href="https://github.com/openstreetmap/iD/issues/7109">manage changeset files fully</a>.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next steps</a></h2>
<p>OpenStreetMap isn't the only data source we need. If you look at the import
pipeline for Seattle, you'll see many more sources for parking, GTFS bus
schedules, person/trip demand data for scenarios, etc. Most of these aren't
standard between cities. If you want to make your city more realistic, we'll
have to import more data. Get in touch.</p>
<p>You may notice issues with OSM data while using A/B Street. Some of these are
bugs in A/B Street itself, but others are incorrectly tagged lanes. Some
resources for fixing OSM:</p>
<ul>
<li><a href="https://learnosm.org">https://learnosm.org</a></li>
<li><a href="https://wiki.openstreetmap.org/wiki/StreetComplete">https://wiki.openstreetmap.org/wiki/StreetComplete</a></li>
<li><a href="../software/parking_mapper.html">Mapping parking</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../user/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../user/asu.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../user/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../user/asu.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
